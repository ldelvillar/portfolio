---
import type { AstroComponentFactory } from 'astro/runtime/server/index.js';
import 'atropos/css';

import List from '@/components/icons/List.astro';
import AstroIcon from '@/components/logos/AstroIcon.astro';
import ReactIcon from '@/components/logos/ReactIcon.astro';
import Vue from '@/components/logos/Vue.astro';
import TypeScript from '@/components/logos/Typescript.astro';
import Tailwind from '@/components/logos/Tailwind.astro';
import Figma from '@/components/logos/Figma.astro';
import Node from '@/components/logos/Node.astro';
import Python from '@/components/logos/Python.astro';
import Express from '@/components/logos/Express.astro';
import MySQL from '@/components/logos/MySQL.astro';
import MongoDB from '@/components/logos/MongoDB.astro';
import NextJS from '@/components/logos/NextJS.astro';
import GCP from '@/components/logos/GCP.astro';
import Azure from '@/components/logos/Azure.astro';
import Docker from '@/components/logos/Docker.astro';
import Kubernetes from '@/components/logos/Kubernetes.astro';
import Linux from '@/components/logos/Linux.astro';
import C from '@/components/logos/C.astro';
import N8n from '@/components/logos/N8n.astro';
import Make from '@/components/logos/Make.astro';
import Zapier from '@/components/logos/Zapier.astro';
import MCP from '@/components/logos/MCP.astro';

interface TechField {
  name: string;
  technologies: {
    icon: AstroComponentFactory;
    name: string;
  }[];
}

const { t } = Astro.props;

const FIELDS: TechField[] = [
  {
    name: 'Frontend',
    technologies: [
      {
        icon: AstroIcon,
        name: 'Astro',
      },
      {
        icon: ReactIcon,
        name: 'React',
      },
      {
        icon: Vue,
        name: 'Vue.js',
      },
      {
        icon: TypeScript,
        name: 'TypeScript',
      },
      {
        icon: Tailwind,
        name: 'Tailwind CSS',
      },
      {
        icon: Figma,
        name: 'Figma',
      },
    ],
  },
  {
    name: 'Backend',
    technologies: [
      {
        icon: Node,
        name: 'Node.js',
      },
      {
        icon: Python,
        name: 'Python',
      },
      {
        icon: Express,
        name: 'Express',
      },
      {
        icon: MySQL,
        name: 'MySQL',
      },
      {
        icon: MongoDB,
        name: 'MongoDB',
      },
      {
        icon: NextJS,
        name: 'Next.js',
      },
    ],
  },
  {
    name: t.techstack.cloud,
    technologies: [
      {
        icon: GCP,
        name: 'GCP',
      },
      {
        icon: Azure,
        name: 'Azure',
      },
      {
        icon: Docker,
        name: 'Docker',
      },
      {
        icon: Kubernetes,
        name: 'Kubernetes',
      },
      {
        icon: Linux,
        name: 'Linux',
      },
      {
        icon: C,
        name: 'C',
      },
    ],
  },
  {
    name: t.techstack.ai,
    technologies: [
      {
        icon: N8n,
        name: 'n8n',
      },
      {
        icon: Make,
        name: 'Make',
      },
      {
        icon: Zapier,
        name: 'Zapier',
      },
      {
        icon: MCP,
        name: 'MCP',
      },
    ],
  },
];
---

<section id="techstack" class="mx-auto max-w-5xl scroll-m-20 py-16 sm:px-4">
  <h2
    class="mb-6 flex items-center text-3xl font-bold text-gray-900 dark:text-white"
  >
    <span class="mr-5">
      <List />
    </span>
    Tech Stack
  </h2>

  <div class="flex flex-col gap-5 md:grid md:grid-cols-2">
    {
      FIELDS.map(field => (
        <div class="atropos my-atropos">
          <div class="atropos-scale">
            <div class="atropos-rotate">
              <div class="atropos-inner">
                <div class="flex h-full flex-col items-center rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-transparent">
                  <h2 class="mt-3 bg-gradient-to-t from-[#fffc5f] to-[#c9b500] bg-clip-text text-3xl font-bold text-transparent dark:from-[#fffec9] dark:to-[#efeb00]">
                    {field.name}
                  </h2>
                  <div class="my-6 grid grid-cols-3 gap-6">
                    {field.technologies.map(technology => (
                      <div class="flex flex-col items-center justify-center text-gray-800 dark:text-gray-200">
                        <div class="text-black dark:text-white">
                          <technology.icon class="size-13" />
                        </div>
                        <h3>{technology.name}</h3>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      ))
    }
  </div>
</section>

<script>
  import Atropos from 'atropos';

  // Initialize
  document.querySelectorAll('.my-atropos').forEach(el => {
    Atropos({ el });
  });
</script>
