---
import '@/styles/global.css';
import { getTranslations } from '@/utils/getTranslations';

const baseUrl = 'https://ldelvillar.vercel.app';
const t = await getTranslations('es');
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{t.site.title}</title>
    <meta name="description" content={t.site.description} />
    <link rel="canonical" href={baseUrl} />

    <!-- Open Graph tags -->
    <meta property="og:title" content={t.site.title} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={baseUrl} />
    <meta property="og:description" content={t.site.description} />
    <meta property="og:image" content={`${baseUrl}/images/favicon.png`} />
    <meta property="og:image:width" content="30" />
    <meta property="og:image:height" content="30" />
    <meta property="og:image:alt" content="Portfolio favicon" />
    <meta property="og:locale" content="es_ES" />
    <meta property="og:locale:alternate" content="en_US" />

    <!-- Twitter tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={t.site.title} />
    <meta name="twitter:description" content={t.site.description} />
    <meta name="twitter:image" content={`${baseUrl}/images/favicon.png`} />
    <meta name="twitter:image:alt" content="Portfolio favicon" />
    <meta name="twitter:site" content="@ldelvillar" />
    <meta name="twitter:creator" content="@ldelvillar" />

    <!-- hreflang tags for SEO -->
    <link rel="alternate" hreflang="es" href={`${baseUrl}/es`} />
    <link rel="alternate" hreflang="en" href={`${baseUrl}/en`} />
    <link rel="alternate" hreflang="x-default" href={`${baseUrl}/es`} />

    <script is:inline>
      const browserLang = navigator.language.slice(0, 2);
      const supportedLangs = ['es', 'en'];
      const preferredLang = supportedLangs.includes(browserLang)
        ? browserLang
        : 'es';

      window.location.href = `/${preferredLang}`;
    </script>

    <meta http-equiv="refresh" content="0; url=/es" />
  </head>
  <body>
    <noscript>
      <p>
        Si no eres redirigido automáticamente, <a href="/es">haz clic aquí</a>.
      </p>
    </noscript>
  </body>
</html>
